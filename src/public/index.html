<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Certificate Manager</title>
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <!-- Main stylesheet -->
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/file-browser.css">
    <link rel="stylesheet" href="/css/modal.css">
    <link rel="stylesheet" href="/css/notifications.css">
    <link rel="stylesheet" href="/css/tabs.css">
    <!-- Favicon -->
    <link rel="icon" href="/img/favicon.png" type="image/png">
</head>
<body>
    <header class="app-header">
        <div class="app-title">
            <i class="fas fa-certificate"></i>
            <h1>Certificate Manager</h1>
        </div>
        
        <div class="view-controls header-view-controls">
            <span>View:</span>
            <div class="view-toggle-container">
                <input type="checkbox" id="view-mode-toggle" class="view-toggle-input">
                <label for="view-mode-toggle" class="view-toggle-label">
                    <span class="view-option view-option-flat">Flat</span>
                    <span class="view-toggle-slider"></span>
                    <span class="view-option view-option-hierarchy">Hierarchy</span>
                </label>
            </div>
        </div>
        
        <div class="header-buttons">
            <button id="refresh-btn" class="header-btn" title="Refresh certificate list">
                <i class="fas fa-sync-alt"></i>
            </button>
            <button id="create-cert-btn" class="header-btn primary-btn" title="Create new certificate">
                <i class="fas fa-plus"></i> New Certificate
            </button>
            <button id="settings-btn" class="header-btn" title="Settings">
                <i class="fas fa-cog"></i>
            </button>
        </div>
    </header>
    
    <div class="main-content-wrapper">
        <main class="app-container">
            <div class="certificate-panel">
                <div class="panel-header">
                    <h2>Certificates</h2>
                    <div class="search-container">
                        <input type="text" id="certSearch" placeholder="Search certificates...">
                        <i class="fas fa-search search-icon"></i>
                    </div>
                </div>

                <div class="table-container">
                    <table class="certificates-table">
                        <thead>
                            <tr>
                                <th class="sort-header" data-sort="name">Name <i class="fas fa-sort"></i></th>
                                <th>Domains</th>
                                <th class="sort-header" data-sort="expiry">Expiry Date <i class="fas fa-sort"></i></th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="certificateTableBody">
                            <!-- Certificate rows will be dynamically added here -->
                            <tr class="loading-row">
                                <td colspan="4">
                                    <div class="loading-container">
                                        <i class="fas fa-spinner fa-spin"></i>
                                        <span>Loading certificates...</span>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>
    
    <footer class="app-footer">
        <div class="footer-status">
            <span id="docker-status">
                <i class="fas fa-circle"></i> 
                Docker: 
                <span class="status-text">Checking...</span>
            </span>
            <span id="ws-status">
                <i class="fas fa-plug"></i> 
                WebSocket: 
                <span class="status-text">Disconnected</span>
            </span>
                <!-- Scheduler status indicator -->
            <span id="scheduler-status">
                <i class="fas fa-circle-notch fa-spin"></i> 
                <span class="status-text">Scheduler: Checking...</span>
            </span>
        </div>
        <div class="footer-info">Certificate Manager v1.0</div>
    </footer>

    <!-- JavaScript files -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="/js/modules/logger.js"></script>

    <script src="/js/utils/domain-validator.js"></script>
    <script src="/js/utils.js"></script>
    <script src="/js/utils/modal-utils.js"></script> 
    <script src="/js/utils/ui-utils.js"></script>
    <script src="/js/utils/date-utils.js"></script> 
    <script src="/js/utils/docker-utils.js"></script>
    <script src="/js/main.js"></script>
    <script>
    // Initialize modal utilities
    document.addEventListener('DOMContentLoaded', function() {
        console.log("DOM fully loaded");
        
        // Verify modal utilities
        if (window.modalUtils && window.modalUtils.ensureModalStyles) {
            console.log("Modal utilities available, ensuring styles are loaded");
            window.modalUtils.ensureModalStyles();
        } else {
            console.error("Modal utilities not available!");
        }
    });
    </script>
</body>
</html>